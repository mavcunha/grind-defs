# vim: ft=sh
run_def "singles/common"

use "brew"
brew_pkg "vim"

do_run "git clone ${GITHUB_URL}/vim.git ${PROJECTS_DIR}/vim"
  unless_dir "${PROJECTS_DIR}/vim"

do_run "mkdir -p ${HOME}/.vim/bundle"
  unless_dir "${HOME}/.vim/bundle"

do_run "ln -f -s ${PROJECTS_DIR}/vim/vimrc ${HOME}/.vimrc"
  unless_link "${HOME}/.vimrc"

function install_bundles() {
  local bundles=("${!1}")
  for b in ${bundles[@]}; do
    local repo=${b}
    local target=${b#*/}

    do_run "git clone https://github.com/${repo}.git ${HOME}/.vim/bundle/${target}"
      unless_dir "${HOME}/.vim/bundle/${target}"
  done
}

vim_bundles=(
  'tpope/vim-pathogen'
  'tpope/vim-surround'
  'tpope/vim-unimpaired'
  'mavcunha/rainbow_parentheses.vim'
  'vim-ruby/vim-ruby'
  'davidoc/taskpaper.vim')

install_bundles vim_bundles[@]
